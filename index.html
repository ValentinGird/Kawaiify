<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kawaiify</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.ibb.co/XZJbQPYm/favicon-32x32.png">
    
    <!-- Google Analytics Tag -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-87691MFX3P"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-87691MFX3P', { 'debug_mode': true });
</script>
<!-- End Google Analytics Tag -->
    
    <style>
        /* Dark mode */
        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
			display: flex;
            flex-direction: column;
        }

        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            text-align: center;
			flex-grow: 1;
        }

        .container {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding-bottom: 50px; /* Leave space for the footer */
        }

        /* Profile banner */
        .banner {
            background-color: #333;
            color: #fff;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
        }

        .banner img {
            border-radius: 50%;
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
        }

        .banner h2 {
            font-size: 1.5em;
            margin: 0;
            color: #FF69B4; /* Flashy pink for the title */
        }

        .banner p {
            font-size: 1em;
            margin-top: 5px;
        }

        /* Grid for offers layout */
        .offers {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            justify-items: center; /* Center the elements in the grid */
            align-items: stretch; /* Ensure elements have the same height */
			margin-bottom: 0px; /* Réduction maximale sans être collé */
			padding-bottom: 0px !important; /* Supprime tout padding en bas */
        }

        /* Offer */
        .offer {
            background-color: #1e1e1e;
            border: 1px solid #444;
            border-radius: 10px;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 400px; /* Limit width to avoid large blocks on PC */
            height: 100%; /* Ensure all sections have the same height */
			margin-bottom: 10px; /* Réduction de l’espace en dessous */
        }

        .offer h2 {
            color: #FF69B4; /* Flashy pink for the titles */
            font-size: 1.8em;
        }
        
        .offer img {
            width: 100%;
            max-height: 500px; /* Limite la hauteur de l'image */
            object-fit: cover; /* Adapte l'image sans la déformer */
            border-radius: 10px; /* Conserve les bords arrondis */
        }
        
        /* Carousel container */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 400px; /* La largeur du carousel reste fixe */
            height: 500px; /* Hauteur plus grande */
            overflow: hidden; /* Garde les images confinées */
            border-radius: 10px;
        }

        .carousel-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out; /* Effet de transition fluide */
        }

        .carousel-slide:nth-child(1) {
            opacity: 1; /* La première image s'affiche par défaut */
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Proportions respectées */
        }

        /* Button styles */
        .button {
            display: inline-block;
            margin-top: 15px;
            padding: 15px 30px;
            background-color: #FF69B4;
            color: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
			
            text-align: center;
            border: 2px solid #FF69B4;
            transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
            text-decoration: none;
            animation: pulse 1.5s infinite ease-in-out;
        }

        .button:hover {
            background-color: #FF1493; /* Rose plus foncé au survol */
            border-color: #FF1493;
        }

        /* Email input styles */
        .email-input-container {
            position: relative;
            width: 100%;
            max-width: 300px;
            margin-top: 20px;
			margin-bottom: 0px; /* Moins d’espace après le champ email */
			padding-bottom: 0px !important;
        }

        .email-input {
            width: 100%;
            padding: 15px;
            background-color: #2a2a2a; /* Gris clair pour le champ */
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: background-color 0.3s ease;
        }

        .email-input::placeholder {
            color: #bbb; /* Placeholder gris plus clair */
        }

        .email-input:focus {
            background-color: #444; /* Un peu plus sombre au focus */
            outline: none;
        }

        .email-input-button {
            background-color: #FF69B4; /* Bouton rose moderne */
            padding: 15px;
            border: none;
            width: 100%;
            font-size: 16px;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .email-input-button:hover {
            background-color: #FF1493; /* Bouton plus sombre au hover */
        }

        footer {
            background-color: #333;
            color: #bbb;
            padding: 10px;
            margin-top: auto; /* Positionne le footer en bas */
            text-align: center;
        }

        footer a {
            color: #FF69B4; /* Rose pour les liens */
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }
		
		/* ✅ Réduit l’espace entre les images de la galerie et les autres sections */
		.gallery {
			display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            justify-items: center; /* Center the elements in the grid */
            align-items: stretch; /* Ensure elements have the same height */
			margin-bottom: 0px; /* Réduction maximale sans être collé */
			margin-top: 0px !important;
        }

		/* ✅ Ajustement de l’espacement entre chaque image du scroll infini */
		.gallery-offer {
			background-color: #1e1e1e;
            border: 1px solid #444;
            border-radius: 10px;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 400px; /* Limit width to avoid large blocks on PC */
            height: 100%; /* Ensure all sections have the same height */
			margin-bottom: 10px; /* Réduction de l’espace en dessous */
        }

		/* ✅ Réduction de l’espace sous les images */
		.gallery-offer img {
			width: 100%;
            max-height: 500px; /* Limite la hauteur de l'image */
            object-fit: cover; /* Adapte l'image sans la déformer */
            border-radius: 10px; /* Conserve les bords arrondis */
        }

		/* ✅ Réduction de l’espace entre les boutons et l’image */
		.gallery-offer .button-container {
			display: flex;
			justify-content: center;
			gap: 8px; /* Moins d’espace entre les boutons */
			margin-top: 10px; /* Moins d’espace entre l’image et les boutons */
			width: 100%;
		}

		/* ✅ Ajustement du footer pour qu’il ne remonte pas trop */
		footer {
			width: 100%;
			background-color: #333;
			color: #bbb;
			padding: 15px;
			text-align: center;
			position: relative;
			margin-top: 30px; /* Un peu d’espace, mais pas trop */
		}
		
		.section-title {
			font-size: 24px;
			font-weight: bold;
			color: #FF69B4; /* Couleur flashy rose */
			text-align: center;
			margin-top: 30px;
			margin-bottom: 10px;
		}
		
		.gallery-description {
			font-size: 14px;
			color: #bbb;
			text-align: center;
			margin-bottom: 10px;
		}
		
		.gallery-description {
			font-size: 16px; /* Augmentation de la taille */
			font-weight: bold; /* Texte en gras */
			color: #ffffff; /* Rose plus clair */
			text-align: center;
			margin-bottom: 20px;
			background: rgba(255, 105, 180, 0.1); /* Légère couleur de fond */
			padding: 10px;
			border-radius: 0px;
			display: inline-block;
		}
		
		.patreon-description {
			font-size: 13px;
			color: #ffffff; /* Blanc pour une meilleure lisibilité */
			text-align: center;
			margin-top: 20px;
			opacity: 0.8; /* Légèrement atténué */
			max-width: 80%; /* ✅ Limite la largeur pour qu'elle reste sous le bouton */
			margin-left: auto;
			margin-right: auto;
			word-wrap: break-word; /* ✅ Évite que le texte dépasse */
		}
		
		/* ✅ Style du popup */
		.popup-container {
			position: fixed;
			bottom: 20px;
			right: 20px;
			width: 300px;
			background-color: #1e1e1e;
			color: #ffffff;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
			text-align: center;
			z-index: 9999;
			display: none; /* Caché au départ */
		}

		/* ✅ Titre du popup */
		.popup-container h3 {
			margin: 0;
			font-size: 18px;
			color: #FF69B4; /* Rose flashy */
		}

		/* ✅ Texte du popup */
		.popup-container p {
			font-size: 14px;
			margin: 10px 0;
			opacity: 0.9;
		}

		/* ✅ Champ email */
		.popup-email-input {
			width: 100%;
			padding: 10px;
			margin: 10px 0;
			border: none;
			border-radius: 6px;
			text-align: center;
			ont-size: 14px;
			background-color: #2a2a2a;
			color: white;
		}

		/* ✅ Bouton du popup */
		.popup-container .popup-button {
			display: inline-block;
			padding: 10px 20px;
			background-color: #FF69B4;
			color: white;
			border-radius: 6px;
			font-size: 14px;
			cursor: pointer;
			text-align: center;
			border: none;
			transition: background-color 0.3s ease;
			text-decoration: none;
			font-weight: bold;
		}

			.popup-container .popup-button:hover {
			background-color: #FF1493;
		}

		/* ✅ Bouton de fermeture */
		.popup-close {
			position: absolute;
			top: 8px;
			right: 12px;
			font-size: 16px;
			cursor: pointer;
			color: #ffffff;
			opacity: 0.7;
		}

		.popup-close:hover {
			opacity: 1;
		}
		
		/* ✅ Barre de progression */
		.progress-container {
			width: 100%;
			height: 5px;
			background: #444;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 1000;
		}

		.progress-bar {
			height: 5px;
			background: #FF69B4;
			width: 0%;
			transition: width 0.2s ease;
		}
		
		.counter-text {
			font-size: 14px;
			color: #fff;
			text-align: center;
			margin-bottom: 5px;
			font-weight: bold;
		}
		
		.info-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			text-align: center;
			margin-top: 10px;
		}

    </style>
</head>
<body>
		<div class="progress-container">
			<div class="progress-bar" id="progressBar"></div>
		</div>
		
		<!-- ✅ POPUP FORMULAIRE EMAIL -->
		<div class="popup-container" id="email-popup">
			<span class="popup-close" onclick="closePopup()">✖</span>
    
			<h3>🎁 Get 100+ Free 4K Wallpapers!</h3>
    
			<p class="popup-description">
				🌸 Featuring <strong>beautiful anime girls</strong>, stylish aesthetics & stunning artwork.<br>
				📥 Download your exclusive pack <strong>for free</strong> now!
			</p>

			<form id="popup-email-form" action="https://form.flodesk.com/forms/679762dbb32b1d435468220c/submit" method="POST">
			<input type="email" name="email" class="popup-email-input" placeholder="Enter your email" required>
			<button type="submit" class="popup-button">Claim Your Pack</button>
		</form>
	</div>
		
        <!-- Offers sections -->
        <div class="offers">

            <!-- Free Pack Offer -->
            <div class="offer" id="free-offer-section">
                <h2>Download 100+ Free Wallpapers</h2>
                <p>Get a free pack of over <strong>100 high-quality anime wallpapers</strong> in <strong>4K</strong> to enhance your device! 📲</p>
                <img src="https://i.ibb.co/FmT37qd/Banner-Patreon-Website-V2.png" alt="Free pack preview">
                <div class="email-input-container">
                    <form id="email-form" action="https://form.flodesk.com/forms/679762dbb32b1d435468220c/submit" method="POST">
                        <input type="email" name="email" class="email-input" placeholder="Enter your email" required>
                        <button type="submit" id="email-submit-button" class="email-input-button">Claim Your Free Pack</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
	
	<h2 class="section-title">Latest <span style="color:#FF69B4;">CENSORED</span> Wallpaper</h2>
<p class="gallery-description">💎 Unlock <strong>the uncensored version in 4K</strong> on Patreon!</p>

<div class="gallery" id="gallery"></div>

<footer>
    <p>&copy; 2025 Kawaiify | <a href="https://tonsite.com/privacy">Privacy Policy</a></p>
    <p><small>Access to Patreon for just $2/month. Recurring subscription.</small></p>
</footer>

<script>

document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('.patreon-track').forEach(button => {
        button.addEventListener("click", function () {
            gtag("event", "click", {
                event_category: "Buttons",
                event_label: "Patreon",
                value: 1
            });
        });
    });

    document.querySelectorAll("#email-submit-button, .popup-button").forEach(button => {
        button.addEventListener("click", function () {
            gtag("event", "sign_up", {
                event_category: "Forms",
                event_label: "Email Submission",
                value: 1
            });
        });
    });
});

document.addEventListener("DOMContentLoaded", function () {
    const lazyImages = document.querySelectorAll("img[loading='lazy']");

    const observer = new IntersectionObserver(
        (entries, observer) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src; // Remplace l'attribut data-src par src
                    observer.unobserve(img);
                }
            });
        },
        { rootMargin: "100px" } // Déclenche un peu avant l'affichage
    );

    lazyImages.forEach((img) => {
        observer.observe(img);
    });
});

document.addEventListener("scroll", function () {
    let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    let scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    let progress = (scrollTop / scrollHeight) * 100;
    document.getElementById("progressBar").style.width = progress + "%";
});

document.addEventListener("DOMContentLoaded", function () {
    const popup = document.getElementById("email-popup");
    const freeOfferSection = document.getElementById("free-offer-section");
    const emailSubmitted = localStorage.getItem("emailSubmitted");
    let hasTriggeredPopup = false; // Pour éviter que le popup ne s'affiche plusieurs fois

    if (!emailSubmitted) {
        // ✅ Vérifie si l'utilisateur dépasse l'offre gratuite
        window.addEventListener("scroll", function () {
            const offerPosition = freeOfferSection.getBoundingClientRect().top + window.scrollY;
            const scrollPosition = window.scrollY + window.innerHeight;

            if (scrollPosition > offerPosition + freeOfferSection.offsetHeight && !hasTriggeredPopup) {
                hasTriggeredPopup = true; // Marque que le popup a été déclenché
                setTimeout(() => {
                    popup.style.display = "block";
                }, 10000); // ✅ Timer de 10 secondes avant affichage
            }
        });
    }

    // ✅ Fermer le popup
    window.closePopup = function () {
        popup.style.display = "none";
    };

    // ✅ Enregistrer que l'utilisateur a soumis son email
    const popupEmailForm = document.getElementById("popup-email-form");
    popupEmailForm.addEventListener("submit", function () {
        localStorage.setItem("emailSubmitted", "true");
    });
});


document.addEventListener("DOMContentLoaded", function () {
    let isLoading = false;
    let loadedImages = new Set();
    const imagesPerLoad = 1;
    const gallery = document.getElementById("gallery");
    let imageUrls = [];

    async function fetchImages() {
        if (isLoading) return;
        isLoading = true;

        try {
            if (imageUrls.length === 0) {
                const response = await fetch('https://raw.githubusercontent.com/ValentinGird/Kawaiify/main/images.json');
                if (!response.ok) throw new Error("❌ Problème de récupération du fichier JSON");

                const data = await response.json();
                imageUrls = data.images;

                if (!imageUrls || imageUrls.length === 0) {
                    console.warn("⚠️ Aucune image trouvée !");
                    return;
                }
            }

            for (let i = 0; i < imagesPerLoad; i++) {
                if (loadedImages.size >= imageUrls.length) {
                    console.log("✅ Toutes les images ont été chargées.");
                    window.removeEventListener('scroll', handleScroll);
                    return;
                }

                const imgUrl = imageUrls[loadedImages.size];

                if (loadedImages.has(imgUrl)) {
                    continue;
                }

                loadedImages.add(imgUrl);

                const offerDiv = document.createElement('div');
                offerDiv.className = 'offer gallery-offer';

                const imgElement = document.createElement('img');
                imgElement.src = imgUrl;
                imgElement.alt = '4K Wallpaper';
                imgElement.loading = "lazy";

                // ✅ Récupérer ou attribuer un nombre de clics aléatoire entre 100 et 500
                let storedCount = localStorage.getItem(`clickCount_${imgUrl}`);
                if (storedCount === null) {
                    storedCount = Math.floor(Math.random() * (500 - 100 + 1)) + 100; // 🔥 Entre 100 et 500
                    localStorage.setItem(`clickCount_${imgUrl}`, storedCount);
                }

                // ✅ Compteur de clics par image 🔥
                const downloadCounter = document.createElement('p');
                downloadCounter.className = 'counter-text';
                downloadCounter.innerHTML = `🔥 ${storedCount} people checked out this wallpaper!`;

                // ✅ Bouton Patreon avec tracking
                const patreonButton = document.createElement('a');
                patreonButton.href = 'https://www.patreon.com/c/Anime_NSFW';
                patreonButton.className = 'button patreon-track';
                patreonButton.innerHTML = '<strong>Get UNCENSORED on Patreon 🔥</strong>';
                patreonButton.setAttribute("data-image", imgUrl);

                // ✅ Description sous le bouton
                const patreonDescription = document.createElement('p');
                patreonDescription.className = 'patreon-description';
                patreonDescription.innerHTML = '💎 Get the <strong>CENSORED & UNCENSORED</strong> versions in <strong>4K</strong> downloadable on Patreon!';

                // ✅ Ajout des éléments dans le bon ordre
                offerDiv.appendChild(imgElement);
                offerDiv.appendChild(downloadCounter); // ✅ Compteur sous l’image
                offerDiv.appendChild(patreonButton);
                offerDiv.appendChild(patreonDescription);
                gallery.appendChild(offerDiv);

                // ✅ Ajout de l'événement de tracking par image
                patreonButton.addEventListener("click", function () {
                    updateDownloadCounter(imgUrl, downloadCounter);
                });
            }

        } catch (error) {
            console.error("❌ Erreur lors du chargement de l'image :", error);
        }

        isLoading = false;
    }

    function handleScroll() {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
            fetchImages();
        }
    }

    window.addEventListener('scroll', handleScroll);
    fetchImages();

    // ✅ Fonction pour mettre à jour le compteur PAR IMAGE
    function updateDownloadCounter(imageUrl, counterElement) {
        let currentCount = localStorage.getItem(`clickCount_${imageUrl}`) || 0;
        currentCount = parseInt(currentCount) + 1;
        localStorage.setItem(`clickCount_${imageUrl}`, currentCount);

        // ✅ Mise à jour du compteur pour CETTE image seulement
        counterElement.innerHTML = `🔥 ${currentCount} people checked out this wallpaper!`;
    }
});

document.addEventListener("DOMContentLoaded", function () {
    // ✅ Track les clics sur les boutons Patreon
    document.body.addEventListener("click", function (event) {
        let button = event.target.closest(".patreon-track");
        if (button) {
            gtag("event", "click", {
                event_category: "Buttons",
                event_label: "Patreon Click",
                value: 1
            });
            console.log("📊 Patreon click tracked! ✅"); // ✅ Debug
        }
    });

    // ✅ Track les soumissions d'email (form principal + popup)
    document.querySelectorAll("#email-form, #popup-email-form").forEach(form => {
        form.addEventListener("submit", function (event) {
            event.preventDefault(); // 🚨 Empêche la soumission immédiate pour capturer l'event
            gtag("event", "sign_up", {
                event_category: "Forms",
                event_label: "Email Submission",
                value: 1
            });
            console.log("📊 Email submission tracked! ✅"); // ✅ Debug
            form.submit(); // ✅ Envoie le formulaire après tracking
        });
    });

    // ✅ Vérifie si Google Analytics fonctionne avec un test event
    gtag('event', 'test_event', {
        event_category: 'Debug',
        event_label: 'Test Event',
        value: 1
    });
    console.log("📊 Test event sent to Google Analytics ✅");
});


	</script>
</body>
</html>
