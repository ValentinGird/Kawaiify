<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You! üéâ</title>
    <style>
        body {
            text-align: center;
            padding: 50px;
            background-color: #121212;
            color: #fff;
            font-family: Arial, sans-serif;
        }
        .redirect-message {
            font-size: 18px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üéâ Thank You for Signing Up!</h1>
    <p class="redirect-message">You will be redirected to your wallpaper in a few seconds...</p>

    <script>
        // ‚úÖ R√©cup√®re l'URL de la derni√®re page visit√©e et l'image s√©lectionn√©e
        const lastPage = localStorage.getItem("lastPage");
        const imageUrl4K = localStorage.getItem("selectedImage4K");

        if (lastPage && imageUrl4K) {
            // ‚úÖ Supprime les donn√©es stock√©es pour √©viter des erreurs futures
            localStorage.removeItem("lastPage");
            localStorage.removeItem("selectedImage4K");

            // ‚úÖ Redirection apr√®s 3 secondes vers la page o√π l'utilisateur √©tait
            setTimeout(() => {
                window.location.href = lastPage + "#download"; // üî• Ajoute un ancre pour un effet smooth
            }, 3000);

            // ‚úÖ D√©clenche automatiquement le t√©l√©chargement apr√®s 4 secondes
            setTimeout(() => {
                window.location.href = imageUrl4K;
            }, 4000);
        } else {
            document.querySelector(".redirect-message").innerText = "Oops! We couldn't find your wallpaper. Try again.";
        }

  document.addEventListener("DOMContentLoaded", function () {
      const wallpaperUrl = localStorage.getItem("wallpaper_url");

      if (wallpaperUrl) {
          // Lancer le t√©l√©chargement automatique
          const a = document.createElement("a");
          a.href = wallpaperUrl;
          a.download = "wallpaper.jpg";  // Nom du fichier t√©l√©charg√©
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);

          // Optionnel : Supprimer l'URL du localStorage apr√®s t√©l√©chargement
          localStorage.removeItem("wallpaper_url");
      } else {
          document.body.innerHTML += "<p>‚ùå Oops! We couldn't find your wallpaper. Try again.</p>";
      }
  });

    </script>
</body>
</html>
