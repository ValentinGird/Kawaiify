<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>{TITLE}</title>
      <meta name="description" content="{DESCRIPTION}">
      <meta name="keywords" content="{TAGS}, anime wallpaper, 4K background, HD anime art">
      <meta property="og:title" content="{TITLE}">
      <meta property="og:description" content="{DESCRIPTION}">
      <meta property="og:image" content="{IMAGE_URL}">
      <meta property="og:type" content="website">
      <meta property="og:url" content="{PAGE_URL}">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:title" content="{TITLE}">
      <meta name="twitter:description" content="{DESCRIPTION}">
      <meta name="twitter:image" content="{IMAGE_URL}">
      <!-- Favicon -->
      <link rel="icon" type="image/png" href="https://i.ibb.co/XZJbQPYm/favicon-32x32.png">
   <style>
      /* Dark mode */
      * {
      box-sizing: border-box;
      }
      html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
      }
      body {
      background-color: #121212;
      color: #e0e0e0;
      font-family: Arial, sans-serif;
      text-align: center;
      flex-grow: 1;
      }
      .container {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      }
      .image-box h2 {
      margin-top: 0px; /* Réduit l’espace au-dessus */
      }
      .image-box {
      background-color: #1e1e1e;
      color: #FF69B4; /* Rose flashy */
      border: 1px solid #444;
      border-radius: 10px;
      padding: 20px;
      width: 100%;  /* ✅ Même largeur que les autres sections */
      max-width: 400px; /* ✅ Empêche qu'il soit trop large sur PC */
      text-align: center;
      margin: 0 auto; /* ✅ Centre parfaitement */
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 15px; /* Réduit l’espace entre chaque box */
      }
      .image-box img {
      width: 100%;
      max-height: 500px; /* Limite la hauteur de l'image */
      object-fit: cover; /* Adapte l'image sans la déformer */
      border-radius: 10px; /* Conserve les bords arrondis */
      }
      .button {
      display: block;
      margin-top: 10px;
      padding: 12px;
      background-color: #FF69B4;
      color: white;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
      width: 100%; /* Prend toute la largeur disponible */
      max-width: 300px; /* Empêche que les boutons deviennent trop larges */
      border: none; /* ✅ Supprime toute bordure grise */
      box-shadow: none; /* ✅ Supprime toute ombre */
      outline: none; /* ✅ Supprime le contour au focus */
      }
      .button:hover {
      background-color: #FF1493;
      }
      .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 10px; /* Réduit l'espace entre les cartes */
      padding: 20px;
      justify-items: center;
      align-items: stretch; /* Permet d’avoir toutes les cartes à la même hauteur */
      }
      .logo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      padding: 10px 0; /* Espace au-dessus et en dessous */
      margin-top: 20px; /* ✅ Ajoute de l’espace au-dessus */
      }
      .logo-container img {
      width: 90%;  /* ✅ Adapte la largeur au mobile sans dépasser */
      max-width: 200px; /* ✅ Ne dépasse pas cette largeur sur PC */
      height: auto; /* ✅ Garde les proportions */
      object-fit: contain;
      }
      footer {
      background-color: #333;
      color: #bbb;
      padding: 15px;
      text-align: center;
      margin-top: 30px;
      }
      footer a {
      color: #FF69B4;
      text-decoration: none;
      }
      footer a:hover {
      text-decoration: underline;
      }
      /* ✅ Free Pack Offer - Alignement parfait */
      /* Grid for offers layout */
      .offers {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px;
      justify-items: center; /* Center the elements in the grid */
      align-items: stretch; /* Ensure elements have the same height */
      margin-bottom: 0px; /* Réduction maximale sans être collé */
      padding-bottom: 0px !important; /* Supprime tout padding en bas */
      }
      .offer {
      background-color: #1e1e1e;
      border: 1px solid #444;
      border-radius: 10px;
      padding: 20px;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 400px; /* Limit width to avoid large blocks on PC */
      height: 100%; /* Ensure all sections have the same height */
      margin-bottom: 10px; /* Réduction de l’espace en dessous */
      }
      /* ✅ Titre */
      .offer h2 {
      color: #FF69B4;
      font-size: 1.5em;
      margin-bottom: 10px;
      }
      /* ✅ Texte */
      .offer p {
      font-size: 0.9em;
      color: #e0e0e0;
      margin-bottom: 15px;
      }
      /* ✅ Image pack */
      .offer img {
      width: 100%;
      height: auto;
      max-height: 500px; /* ✅ Ajusté pour la galerie */
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 10px;
      }
      /* ✅ Conteneur du formulaire */
      .email-input-container {
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center; /* ✅ Centre les éléments */
      gap: 12px; /* ✅ Ajoute de l'espace entre les éléments */
      }
      /* ✅ Champ email */
      .email-input {
      width: 100%;
      padding: 12px;
      background-color: #2a2a2a;
      border: none;
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      transition: background-color 0.3s ease;
      margin-bottom: 5px; /* 🔥 Espace sous l'input */
      }
      .email-input::placeholder {
      color: #bbb;
      }
      .email-input:focus {
      background-color: #444;
      outline: none;
      }
      /* ✅ Bouton */
      .email-input-button {
      background-color: #FF69B4;
      padding: 12px;
      border: none;
      width: 100%;
      font-size: 14px;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      text-align: center;
      transition: background-color 0.3s ease;
      }
      /* ✅ Ajout d'un espace supplémentaire entre le champ email et le bouton */
      .email-input-button {
      margin-top: 5px; /* ✅ Petit espace pour éviter qu'ils ne se touchent */
      }
      .email-input-button:hover {
      background-color: #FF1493;
      }
      footer {
      background-color: #333;
      color: #bbb;
      padding: 10px;
      margin-top: auto; /* Positionne le footer en bas */
      text-align: center;
      }
      footer a {
      color: #FF69B4; /* Rose pour les liens */
      text-decoration: none;
      }
      footer a:hover {
      text-decoration: underline;
      }
      /* ✅ Réduit l’espace entre les images de la galerie et les autres sections */
      .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px;
      justify-items: center; /* Center the elements in the grid */
      align-items: stretch; /* Ensure elements have the same height */
      margin-bottom: 0px; /* Réduction maximale sans être collé */
      margin-top: 0px !important;
      }
      /* ✅ Ajustement de l’espacement entre chaque image du scroll infini */
      .gallery-offer {
      background-color: #1e1e1e;
      border: 1px solid #444;
      border-radius: 10px;
      padding: 20px;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 400px; /* Limit width to avoid large blocks on PC */
      height: 100%; /* Ensure all sections have the same height */
      margin-bottom: 10px; /* Réduction de l’espace en dessous */
      }
      /* ✅ Réduction de l’espace sous les images */
      .gallery-offer img {
      width: 100%;
      max-height: 500px; /* Limite la hauteur de l'image */
      object-fit: cover; /* Adapte l'image sans la déformer */
      border-radius: 10px; /* Conserve les bords arrondis */
      }
      /* ✅ Réduction de l’espace entre les boutons et l’image */
      .gallery-offer .button-container {
      display: flex;
      justify-content: center;
      gap: 8px; /* Moins d’espace entre les boutons */
      margin-top: 10px; /* Moins d’espace entre l’image et les boutons */
      width: 100%;
      }
      .button-container {
      width: 100%; /* Assure que le conteneur prend toute la largeur */
      display: flex;
      flex-direction: column; /* Met les boutons l'un sous l'autre */
      gap: 5px; /* Ajoute un espace entre les boutons */
      align-items: center; /* Centre les boutons horizontalement */
      }
      /* ✅ Ajustement du footer pour qu’il ne remonte pas trop */
      footer {
      width: 100%;
      background-color: #333;
      color: #bbb;
      padding: 15px;
      text-align: center;
      position: relative;
      margin-top: 30px; /* Un peu d’espace, mais pas trop */
      }
      .section-title {
      font-size: 24px;
      font-weight: bold;
      color: #FF69B4; /* Couleur flashy rose */
      text-align: center;
      margin-top: 30px;
      margin-bottom: 10px;
      }
      .gallery-description {
      font-size: 14px;
      color: #bbb;
      text-align: center;
      margin-bottom: 10px;
      }
      .gallery-description {
      font-size: 16px; /* Augmentation de la taille */
      font-weight: bold; /* Texte en gras */
      color: #ffffff; /* Rose plus clair */
      text-align: center;
      margin-bottom: 20px;
      background: rgba(255, 105, 180, 0.1); /* Légère couleur de fond */
      padding: 10px;
      border-radius: 0px;
      display: inline-block;
      }
      /* ✅ Champ email */
      .popup-email-input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
      text-align: center;
      background-color: #2a2a2a;
      color: white;
      font-size: 16px; /* ✅ Empêche le zoom sur iOS */
      }
      /* ✅ Bouton du popup */
      .popup-container .popup-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: #FF69B4;
      color: white;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      text-align: center;
      border: none;
      transition: background-color 0.3s ease;
      text-decoration: none;
      font-weight: bold;
      }
      .popup-container .popup-button:hover {
      background-color: #FF1493;
      }
      .counter-text {
      font-size: 14px;
      color: #fff;
      text-align: center;
      margin-bottom: 5px;
      font-weight: bold;
      }
      .info-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-top: 10px;
      }
      .download-button {
      display: block;
      width: 100%; 
      padding: 10px;
      font-size: 14px;
      text-align: center;
      border-radius: 6px;
      font-weight: bold;
      transition: background-color 0.3s ease;
      }
      .download-button:hover {
      background-color: #FF1493;
      }
      /* ✅ Arrière-plan flou (overlay) */
      .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6); /* Fond semi-transparent */
      backdrop-filter: blur(8px); /* Effet de flou */
      display: none; /* Caché par défaut */
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
      }
      /* ✅ Style du popup CENTRÉ */
      .popup-container {
      background-color: #1e1e1e;
      color: #ffffff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      text-align: center;
      width: 90%;
      max-width: 400px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: fadeIn 0.3s ease-in-out;
      /* ✅ Correction pour éviter l'espace inutile en bas */
      max-height: 90vh;
      overflow-y: auto;
      width: 90%;
      min-width: 300px;
      display: flex;
      flex-direction: column; /* ✅ Force les éléments à rester en colonne */
      align-items: center;
      text-align: center;
      word-wrap: break-word; /* ✅ Force le texte à passer à la ligne */
      overflow: hidden;
      }
      /* ✅ Ajustement pour mobile */
      @media screen and (max-width: 600px) {
      .popup-container {
      width: 90%;
      max-width: 350px;
      padding: 15px;
      }
      }
      /* ✅ Animation fluide */
      @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -55%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
      }
      /* ✅ Bouton de fermeture bien positionné */
      .popup-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      cursor: pointer;
      color: #ffffff;
      opacity: 0.8;
      z-index: 10;
      }
      .popup-close:hover {
      opacity: 1;
      }
      /* ✅ Style de la liste des avantages */
      .popup-benefits {
      text-align: left;
      margin: 15px 0;
      padding-left: 20px;
      list-style: none;
      }
      .popup-benefits li {
      font-size: 14px;
      margin-bottom: 5px;
      padding-left: 20px;
      position: relative;
      }
      /* ✅ Ajout d'une icône devant chaque point */
      .popup-benefits li::before {
      content: ""; /* Emoji Checkmark */
      position: absolute;
      left: 0;
      }
      /* ✅ Style du bouton alternatif */
      .popup-alt-download {
      font-size: 13px;
      margin-top: 15px;
      color: #bbb;
      }
      /* ✅ Style de l'image du popup */
      .popup-image {
    width: 50%; /* Réduit à 80% de la largeur du popup */
    max-width: 250px; /* ✅ Limite la taille maximale */
    height: auto; /* ✅ Garde le ratio d’origine */
    display: block; /* ✅ Assure un bon affichage */
    margin: 0 auto 10px; /* ✅ Centre l’image et ajoute un espace en dessous */
    border-radius: 8px; /* ✅ Garde des bords arrondis pour le style */
}
      .popup-container h3 {
      margin-top: 0px; /* ✅ Réduit l’espace au-dessus du titre */
      margin-bottom: 0px; /* ✅ Réduit l’espace sous le titre */
      }
      .popup-container p {
      margin-bottom: 0px; /* ✅ Réduit l’espace entre la description et le reste */
      }
      /* ✅ Réduction de l’espace sous la liste des avantages */
      .popup-benefits {
      margin-bottom: 10px;
      }
      .popup-alt-button {
      background: none;
      border: none;
      color: #bbb; /* Gris pour que ce soit discret */
      font-size: 14px;
      text-decoration: underline; /* Ajoute le style lien */
      cursor: pointer;
      padding: 0;
      }
      .popup-alt-button:hover {
      color: #FF69B4; /* Rose au survol pour rester cohérent avec ton design */
      }
      .no-scroll {
      overflow: hidden;
      height: 100vh;
      }
      /* ✅ Style du bouton Download in HD (gris) */
      .download-button-hd {
      background-color: #555;
      color: #ddd;
      border: 2px solid #777;
      margin-top: 10px; /* Réduit l'espace entre les boutons */
      }
      .download-button-hd:hover {
      background-color: #666; /* Gris plus clair au survol */
      border-color: #888;
      }
      /* ✅ Style du bouton Download in 4K (rose pour mettre en avant) */
      .download-button-4k {
      background-color: #FF69B4;
      color: white;
      border: 2px solid #FF69B4;
      }
      /* ✅ Style du bouton pour remonter en haut */
      .scroll-top-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background-color: #FF69B4; /* Rose flashy */
      border: none;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      transition: opacity 0.3s ease-in-out, transform 0.2s ease;
      z-index: 1000;
      }
      /* ✅ Effet au survol */
      .scroll-top-button:hover {
      background-color: #FF1493; /* Rose plus foncé */
      transform: scale(1.1);
      }
      /* ✅ Style spécifique pour l'icône SVG */
      .scroll-top-button svg {
      width: 24px;
      height: 24px;
      stroke: white; /* ✅ Flèche blanche */
      }
      /* ✅ Conteneur de la barre de recherche */
      .search-container {
      display: flex;
      justify-content: center; /* ✅ Centre la barre */
      align-items: center;
      margin: 20px auto; /* ✅ Ajoute un peu d'espace autour */
      width: 90%;
      max-width: 350px;
      background-color: #1e1e1e;
      padding: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      margin-bottom: 15px; /* Ajuste selon ton besoin */
      margin-top: 0px; /* Ajuste la valeur selon ton besoin */
      }
      /* ✅ Barre de recherche */
      .search-bar {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 2px solid #FF69B4;
      border-radius: 8px;
      background-color: #1e1e1e;
      color: white;
      text-align: center;
      }
      /* ✅ Style du titre */
      .image-title {
      font-size: 18px;
      font-weight: bold;
      color: #FF69B4; /* Rose flashy */
      margin-top: -5px; /* Réduction de l'espace au-dessus */
      margin-bottom: 10px; /* Espacement avant l'image */
      text-align: center;
      }
      /* ✅ Style de la description */
      .image-description {
      font-size: 14px;
      color: #bbb;
      margin: 5px 0;
      text-align: center;
      padding: 0 10px;
      }
      /* ✅ Conteneur des tags */
      .tags-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 5px;
      margin-bottom: 10px;
      }
      /* ✅ Style des tags */
      .tag {
      background-color: #2a2a2a;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      font-weight: bold;
      }
      /* ✅ Style des tags */
      .tag {
      background-color: #2a2a2a;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      font-weight: bold;
      cursor: pointer; /* ✅ Rend le tag cliquable */
      transition: background-color 0.2s ease-in-out;
      user-select: none; /* Empêche le navigateur de "garder" le focus sur le tag */
      }
      /* ✅ Effet au survol */
      .tag:hover {
      background-color: #FF1493;
      }
      /* ✅ Effet actif */
      .tag:hover,
      .tag.active {
      background-color: #FF1493;
      }
      .tag:not(.active) {
      background-color: #2a2a2a !important; /* 🔥 Remet la couleur de base si désactivé */
      }
      /* ✅ Empêcher le tag de rester rose après un second clic */
      .tag:focus {
      outline: none;
      background-color: inherit !important; /* 🔥 Force à garder la couleur d'origine */
      }
      /* ✅ Effet quand un tag est actif (cliqué) */
      .tag.active {
      background-color: #FF1493;
      border: 2px solid white;
      }
      /* ✅ Pour réactiver l'image mettre "display: block;" */
      /* ✅ Pour désactiver l'image mettre "display: none;" */
      .popup-image {
      display: block; /* Cache l'image */
      }
      /* ✅ Tags non cliquables sous l'image principale */
      .non-clickable {
      cursor: default !important; /* Empêche le clic */
      pointer-events: none; /* Désactive toute interaction */
      opacity: 0.9; /* Légèrement différent visuellement */
      }
      /* ✅ Désactive les clics sur les tags sous l'image principale */
      .tag.non-clickable {
      cursor: default !important;
      pointer-events: none;
      opacity: 0.9; /* Légèrement différent visuellement */
      }
      /* ✅ Empêche le clic droit et le drag & drop sur toutes les images */
      img {
      pointer-events: none; /* Désactive toute interaction avec la souris */
      user-select: none; /* Empêche la sélection */
      -webkit-user-drag: none; /* Désactive le glisser-déposer sur Webkit (Chrome, Safari) */
      }
   </style>
   </head>
   <body>
      <!-- ✅ Bouton de retour en haut -->
      <button id="scrollTopButton" class="scroll-top-button">
         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
         </svg>
      </button>
      <div class="logo-container">
         <a href="https://kawaiify.art">
         <img src="https://i.ibb.co/rfGqdvc6/Logo-test.png" alt="Kawaiify Logo">
         </a>
      </div>
      <!-- ✅ Barre de recherche -->
      <div class="search-container">
         <input type="text" id="searchBar" class="search-bar" placeholder="🔍 Search wallpapers...">
      </div>
      <!-- ✅ Section de l'image principale -->
<div class="offers">
   <div class="image-box">
      <h2>{TITLE}</h2>
      <img id="main-image" src="{IMAGE_URL}" alt="Wallpaper">
      <!-- ✅ Ajout de la description -->
      <p class="image-description">{DESCRIPTION}</p>
      <!-- ✅ Ajout des tags dynamiques -->
      <div class="tags-container" id="main-image-tags"></div>
      <!-- ✅ Boutons Download -->
      <div class="button-container">
         <button class="download-button download-button-4k" id="popup-4k-main-btn">
            <strong>Download in 4K (Free)</strong>
         </button>
         <button class="download-button download-button-hd" onclick="forceDownload('{IMAGE_URL}')">
            <strong>Download in HD</strong>
         </button>
      </div>
   </div>
</div>

<!-- ✅ Popup Principal 4K (Page principale) -->
<div class="popup-overlay" id="popup-4k-main-overlay">
   <div class="popup-container" id="popup-4k-main">
      <span class="popup-close" id="popup-close-main">✖</span>
      <img id="popup-4k-main-image" src="{IMAGE_URL}" alt="4K Wallpaper Preview" class="popup-image">
      <h3>🎁 Get This 4K Anime Wallpaper & Unlock Daily Surprises! ✨</h3>
      <p>Enter your email to <strong>instantly download this wallpaper in ultra-HD</strong> and <strong>get access to daily exclusive content</strong>.</p>
      
      <!-- ✅ Formulaire d'inscription -->
      <form id="popup-4k-main-form" action="https://form.flodesk.com/forms/679762dbb32b1d435468220c/submit" method="POST">
         <input type="email" name="email" class="popup-email-input" placeholder="Enter your email" required>
         <button type="submit" class="popup-button">📥 Download in 4K Now!</button>
      </form>

      <!-- ✅ Téléchargement sans email -->
      <p class="popup-alt-download">
         Prefer not to enter your email? <br>
         <a href="#" id="popup-4k-main-hd-download" class="popup-alt-button">Download in HD (No email)</a>
      </p>
   </div>
</div>

<!-- ✅ Popup 4K Gallery -->
<div class="popup-overlay" id="popup-4k-overlay">
    <div class="popup-container" id="popup-4k">
        <span class="popup-close" id="popup-close-gallery">✖</span>
        <img id="popup-4k-gallery-image" src="" alt="4K Wallpaper Preview" class="popup-image">
        <h3>🎁 Get This 4K Anime Wallpaper & Unlock Daily Surprises! ✨</h3>
        <p>Enter your email to <strong>instantly download this wallpaper in ultra-HD</strong> and <strong>get access to daily exclusive content</strong>.</p>

        <!-- ✅ Formulaire d'inscription -->
        <form id="popup-4k-form" action="https://form.flodesk.com/forms/679762dbb32b1d435468220c/submit" method="POST">
            <input type="email" name="email" class="popup-email-input" placeholder="Enter your email" required>
            <button type="submit" class="popup-button">📥 Download in 4K Now!</button>
        </form>

        <!-- ✅ Option sans email -->
        <p class="popup-alt-download">
            Prefer not to enter your email? <br>
            <a href="#" id="popup-4k-gallery-hd-download" class="popup-alt-button">Download in HD (No email)</a>
        </p>
   </div>
</div>


      <!-- Free Pack Offer -->
      <div class="offers">
         <div class="offer" id="free-offer-section">
            <h2>Unlock 100+ Stunning 4K Wallpapers for Free!</h2>
            <p>Get a free pack of over <strong>100 high-quality anime wallpapers</strong> in <strong>ultra-sharp 4K</strong> resolution to enhance your device! 📲</p>
            <img src="https://i.ibb.co/FmT37qd/Banner-Patreon-Website-V2.png" alt="Free pack preview">
            <div class="email-input-container">
               <form id="email-form" action="https://form.flodesk.com/forms/679762dbb32b1d435468220c/submit" method="POST">
                  <input type="email" name="email" class="email-input" placeholder="Enter your email" required>
                  <button type="submit" id="email-submit-button" class="email-input-button">Claim Your Free Pack</button>
               </form>
            </div>
         </div>
      </div>
      <h2 class="section-title">Similar Wallpapers</h2>
      <div class="gallery" id="gallery"></div>
      <footer>
         <p>&copy; 2025 Kawaiify | <a href="https://tonsite.com/privacy">Privacy Policy</a></p>
      </footer>
      <script>
         document.addEventListener("DOMContentLoaded", function () {
    let isLoading = false;
    const imagesPerLoad = 10;
    let loadedImages = new Set();
    const gallery = document.getElementById("gallery");
    let imageUrls = [];
    let nextImageIndex = 0;

    // ✅ Vérifie si l'utilisateur a déjà soumis son email
    function hasSubmittedEmail() {
        return localStorage.getItem("emailSubmitted") === "true";
    }

    // ✅ Sauvegarde les informations après soumission du formulaire
    function setEmailSubmitted(imageUrl4K) {
        localStorage.setItem("emailSubmitted", "true");
        localStorage.setItem("wallpaperUrl", imageUrl4K); // 🔥 Stocke bien l'image 4K
        localStorage.setItem("previousPage", window.location.href); // Stocke la page actuelle
        localStorage.setItem("scrollPosition", window.scrollY); // Stocke la position du scroll
    }

    // ✅ Vérifie et télécharge l'image 4K après la thank-you page
    function checkPendingDownload() {
        const imageUrl4K = localStorage.getItem("wallpaperUrl");
        if (imageUrl4K) {
            forceDownload(imageUrl4K);
            localStorage.removeItem("wallpaperUrl"); // Nettoie après le téléchargement
        }
    }

    // ✅ Télécharge une image
    async function forceDownload(imageUrl) {
        if (!imageUrl) {
            console.error("❌ Aucun lien de téléchargement disponible.");
            return;
        }

        try {
            const response = await fetch(imageUrl);
            const blob = await response.blob();
            const blobUrl = window.URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = blobUrl;
            a.download = "wallpaper.jpg";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            setTimeout(() => {
                window.URL.revokeObjectURL(blobUrl);
            }, 1000);
        } catch (error) {
            console.error("❌ Erreur lors du téléchargement :", error);
        }
    }

    // ✅ Ouvre le popup principal (image du haut)
    function openPopupMain4K() {
        const mainImage = document.getElementById("main-image");
        if (!mainImage || !mainImage.src) {
            console.warn("⚠️ Impossible d'ouvrir le popup principal: image non chargée.");
            return;
        }

        const imageUrlHD = mainImage.src;
        const imageUrl4K = imageUrlHD.replace(".jpg", "_4k.jpg");

        if (hasSubmittedEmail()) {
            forceDownload(imageUrl4K);
        } else {
            document.getElementById("popup-4k-main-overlay").style.display = "flex";

            document.getElementById("popup-4k-main-form").addEventListener("submit", function () {
                setEmailSubmitted(imageUrl4K);
            });
        }
    }

    // ✅ Ouvre le popup 4K de la galerie
    function openPopup4K(imageUrlHD, imageUrl4K) {
        if (!imageUrlHD || !imageUrl4K) {
            console.warn("⚠️ Impossible d'ouvrir le popup 4K: images non chargées.");
            return;
        }

        if (hasSubmittedEmail()) {
            forceDownload(imageUrl4K);
        } else {
            const popupImage = document.getElementById("popup-4k-gallery-image");
            const overlay = document.getElementById("popup-4k-overlay");

            popupImage.src = imageUrl4K;
            overlay.style.display = "flex";

            document.getElementById("popup-4k-gallery-hd-download").onclick = function (event) {
                event.preventDefault();
                forceDownload(imageUrlHD);
                closePopup("popup-4k-overlay");
            };

            document.getElementById("popup-4k-form").addEventListener("submit", function () {
                setEmailSubmitted(imageUrl4K);
            });
        }
    }

    // ✅ Ferme un popup spécifique
    function closePopup(popupId) {
        const overlay = document.getElementById(popupId);
        if (overlay) {
            overlay.style.display = "none";
            document.body.style.overflow = "";
        }
    }

    // ✅ Chargement des images JSON
    async function loadInitialImages() {
        try {
            const response = await fetch("https://raw.githubusercontent.com/ValentinGird/Kawaiify/main/images.json");
            if (!response.ok) throw new Error("❌ Problème avec le fichier JSON");

            const data = await response.json();
            imageUrls = data.images;

            if (!imageUrls || imageUrls.length === 0) {
                console.warn("⚠️ Aucune image trouvée !");
                return;
            }

            fetchImages();
        } catch (error) {
            console.error("❌ Erreur JSON :", error);
        }
    }

    // ✅ Fonction pour charger et afficher les images dans la galerie
    async function fetchImages() {
        if (isLoading || nextImageIndex >= imageUrls.length) return;
        isLoading = true;

        try {
            const imagesToLoad = imageUrls.slice(nextImageIndex, nextImageIndex + imagesPerLoad);
            nextImageIndex += imagesPerLoad;

            imagesToLoad.forEach(imgData => {
                if (!loadedImages.has(imgData.url)) {
                    loadedImages.add(imgData.url);

                    const offerDiv = document.createElement("div");
                    offerDiv.className = "offer gallery-offer";

                    // ✅ Image
                    const imgElement = document.createElement("img");
                    imgElement.src = imgData.url;
                    imgElement.alt = imgData.title;
                    imgElement.loading = "lazy";

                    // ✅ Titre
                    const titleElement = document.createElement("h3");
                    titleElement.className = "image-title";
                    titleElement.textContent = imgData.title;

                    // ✅ Description
                    const descriptionElement = document.createElement("p");
                    descriptionElement.className = "image-description";
                    descriptionElement.textContent = imgData.description;

                    // ✅ Bouton HD (corrigé)
                    const downloadButtonHD = document.createElement("button");
                    downloadButtonHD.className = "download-button download-button-hd";
                    downloadButtonHD.innerHTML = "<strong>Download in HD</strong>";
                    downloadButtonHD.addEventListener("click", function () {
                        forceDownload(imgData.url); // ✅ Télécharge bien la version HD
                    });

                    // ✅ Bouton 4K avec popup
                    const download4KButtonPopup = document.createElement("button");
                    download4KButtonPopup.className = "download-button download-button-4k";
                    download4KButtonPopup.innerHTML = "<strong>Download in 4K (Free)</strong>";
                    download4KButtonPopup.addEventListener("click", function () {
                        openPopup4K(imgData.url, imgData.url_4k);
                    });

                    // ✅ Ajout des éléments à l'offre
                    offerDiv.appendChild(titleElement);
                    offerDiv.appendChild(imgElement);
                    offerDiv.appendChild(descriptionElement);
                    offerDiv.appendChild(download4KButtonPopup);
                    offerDiv.appendChild(downloadButtonHD);

                    gallery.appendChild(offerDiv);
                }
            });
        } catch (error) {
            console.error("❌ Erreur lors du chargement des images :", error);
        }

        isLoading = false;
    }

    // ✅ Gestion du scroll infini
    window.addEventListener("scroll", function () {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
            fetchImages();
        }
    });

    // ✅ Gestion des popups
    document.querySelectorAll(".popup-close").forEach(closeBtn => {
        closeBtn.addEventListener("click", function () {
            closePopup(this.closest(".popup-overlay").id);
        });
    });

    document.querySelectorAll(".popup-overlay").forEach(overlay => {
        overlay.addEventListener("click", function (event) {
            if (event.target === overlay) {
                closePopup(overlay.id);
            }
        });
    });

    document.getElementById("popup-4k-main-btn").addEventListener("click", function () {
        openPopupMain4K();
    });

    checkPendingDownload();
    loadInitialImages();
});




















            
      </script>
   </body>
</html>